---
published: false
---
# 入门区块链: 初学者建立区块链解决方案指南


作者 by Priyansu Sekhar Panda ， Gautam Dhameja , Bikramaditya Singhal
翻译 by 江振业

## 图书简介

了解 Blockchain 的具体细节，使用不同风格的简单案例，以及加密学基础。 您还将了解一些设计区块链项目的注意事项进而帮助您构建新的区块链解决方案。

入门区块链是一个初学者的指南，从技术角度解释区块链的核心概念。 通过学习不同类型区块链的设计构造，您将更好地理解为特定项目构建最佳解决方案。 书涵盖区块链技术，加密，加密货币和分布式共识机制。 您将了解这些系统如何工作，以及如何设计它们以提供下一代业务解决方案。

## 你将学到什么
详细了解加密货币是如何工作的
了解区块链核心技术的组成部分
用密码学构建安全的区块链解决方案
了解如何使用不同的区块链平台及其选择合适的案例
了解区块链的发展现状、范围、局限性和未来趋势
 
##这本书是写给谁的
软件开发人员和架构师，计算机科学毕业生，企业家，以及任何希望深入研究区块链基本原理的人。 熟悉计算机科学、数据结构和算法对理解本书是有帮助的。


 

## 目录


1. 区块链导论
2. 区块链是如何工作的
3. 比特币是如何运作的

4.以太坊是如何工作的
5. 区块链应用程序开发
6. 构建一个 Ethereum DApp


## 1. 区块链导论

区块链是新的颠覆性技术，已经开始重新设计商业、社会和政治互动，以及任何其他方式的价值交换。 再次强调，这不仅仅是一个趋势，而是一个已经在发生的快速变化的社会现实。 截至本文撰写之时，40多家顶级金融机构和许多不同行业的公司已经开始探索区块链，以降低交易成本，缩短交易时间，减少欺诈风险，并消除中间人或中介服务。 一些公司正在尝试重新设计过去的系统和服务，将它们提升到一个新的水平，并提供新的服务种类。

我们将在整本书中更详细地介绍区块链。如果你是区块链小白，你可以按照章节的顺序阅读，或者挑选那些与你相关的阅读。 这一章解释什么是区块链，它是如何发展的，以及它在当今世界的一些用途和案例。 它提供了一个由外向内的观点，以便你能够深入研究区块链。





### 1.1区块链的背景故事

早在20世纪70年代，为互联网奠定基础的是 tcp / ip (传输控制协议 / 互联网协议)。 在 tcp / ip 协议出现之前，是一个需要双方专线连接才能进行通信的电路交换时代。 Tcp / ip 提出了自己的分组交换协议设计，更加开放和点对点，不需要预先在各方之间建立专用线路。

20世纪90年代初，当互联网通过万维网(WWW)向公众开放时，人们认为互联网应该更加开放和点对点。 这是因为它是在开放和分布式的 tcp / ip 之上构建的。 当任何新技术，尤其是革命性的技术进入市场时，要么它们自己消失，要么它们产生的影响使它们成为公认的规范。 人们适应了万维网革命，并利用它提供的各种可能的好处。 结果，万维网开始以一种可能不是它想象的那样的方式发展起来。 它本可以更加开放，更加容易获取，更加点对点。 许多新技术和新业务开始建立在它的基础之上，它变成了今天的样子ーー更加集中。 人们慢慢地、渐渐地习惯了技术所提供的东西。 如果一项国际交易需要几天时间才能完成，或者成本很高，或者不那么可靠，人们还是愿意接受的。

让我们仔细研究一下银行体系及其演变。 从物物交换制度的古老时代到法定货币，交易和结算之间并没有真正的区别，因为它们不是两个独立的实体。 举个例子，如果爱丽丝必须付给鲍勃10美元，她只需要当面交给鲍勃10美元，交易就在那里完成了。 银行不需要从爱丽丝的账户借记10美元，同时贷记到鲍勃的账户，或者成为一个信任系统来确保爱丽丝不会欺骗鲍勃。 然而，与不在身边的人进行直接交易是困难的。 因此，银行系统随着来自世界各个角落的更多服务产品和交易功能的发展而演变。 有了互联网的帮助，地理位置不再是一个限制，银行业务也变得比以往任何时候都容易。 不仅仅是银行业: 互联网促进了许多不同类型的网络价值交换。

技术使来自印度的某人能够与英国的某人进行货币交易，但要付出一定的代价。 这类交易需要数天才能结算，而且成本也很高。 总是需要银行为两个或两个以上当事方之间的此类交易建立信任并确保安全。 如果技术能够在没有这些中间机构和集中系统的情况下实现信任和安全呢？ 不知何故，这一部分(基于信任的技术)完全缺失，导致了中央系统的发展，如银行、托管服务、清算所、登记机构和许多其他此类机构。 区块链被证明是互联网革命缺失部分的答案，它促进了一个加密安全的不基于信任的系统诞生。

中本聪，这个全世界都知道的假名，一定觉得自从20世纪80年代以来，货币体系没有受到技术革命的影响。 银行形成了中央机构，负责维护交易记录、管理互动、强化信任和安全，并对整个系统进行管理。 整个商业都依赖于这些金融机构，它们作为可信赖的第三方来处理支付。 金融机构的介入增加了交易结算的成本和时间，也限制了交易规模。 需要通过调解来解决争端，但这意味着完全不可逆转的交易永远不可能实现。 这导致了一种情况，即某人需要信任才能与另一人进行交易。 当然，这种官僚体制必须改变，以跟上经济预期的数字化转型。 因此，中本聪发明了一种叫做比特币的加密货币，这种货币是通过基础技术---- 区块链来实现的。     比特币只是区块链的一个货币方面的案例，它解决了基于信任的模型固有的弱点。 在本书中，我们将深入研究比特币和区块链的基本原理。


## 1.2什么是区块链？

互联网已经彻底改变了生活、社会和商业的许多方面。 然而，我们在前面的章节中了解到，在过去的几十年中，人们和组织之间执行交易的方式并没有太大的改变。 区块链被认为是完成互联网之谜的组成部分，使它更加开放，更容易获取，更可靠。

为了理解区块链，你必须从商业和技术的角度来理解它。 让我们首先在商业交易上下文中理解它，以认识它是"什么"，然后在后面的章节中查看技术细节，以理解它是"如何"运作的。

区块链是一个以点对点的方式交易价值的记录系统(不只是金钱!) 。 这意味着不需要一个可信任的中间人，如银行、经纪人或其他代管服务，作为一个可信任的第三方。  例如，如果爱丽丝付给鲍勃10美元，为什么要通过银行？ 请看图1-1。



![A440588_1_En_1_Fig1_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-2521bbc37cf83f83.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


现在让我们看一个不同的例子。 一个典型的股票交易发生在几秒钟，但它的结算需要几个星期。 在这个数字时代，这样做是否可取？ 当然不可取！ 图1-2展示了当前的情况。



![A440588_1_En_1_Fig2_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-20883173e6dd4531.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

如果有人想从公司或个人手中购买一些股票，他们可以直接用即时结算的方式从这些公司或个人手中购买，而不需要经纪人、清算所或其他金融机构介入。 针对这种情况的分布式和 p2p 解决方案可以表示为图1-3。


![A440588_1_En_1_Fig3_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-7af0e73f9679a9b7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

请注意，在一个区块链设置中交易和结算不是两个不同的实体！ 这些交易类似于法定货币交易，如果某人支付一张10美元纸币，他们就不再拥有这张10美元纸币，而这张10美元纸币实际上会转移给新的所有者。
现在从功能的角度来理解区块链，让我们看看它的技术，和命名它为"区块链"的原因。 我们将看到区块链技术是什么，而把"如何"运作放在第二章。

阅读下面的陈述，如果这些概念你不能完整理解，不要担心。 你可能想要之后再读这本书，但是在你第一遍读完这本书之前要有耐心。
- 区块链是一个点对点的价值交易系统，无需可信的第三方参与。
- 它是一个共享的、分布式的和公开的交易账本。 此交易账本数据库在大量节点上进行复制。
- 此交易账本数据库是仅限于追加，不能更改。 这意味着每个条目都是一个永久条目。 它上面的任何新条目都会同步到托管在不同节点上的数据库的所有副本上。
- 不需要受信任的第三方作为中介来验证、保护和结算交易。
- 它是互联网之上的另一层级，可以与其他互联网技术共存。
- 正如 tcp / ip 被设计来实现一个开放的系统，区块链技术被设计来实现真正的去中心化。 为了做到这一点，比特币的创造者将其开放源码，以便激发许多去中心化的应用程序。

一个典型的区块链可能看起来如图1-4所示。

![A440588_1_En_1_Fig4_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-dffb1aa2bb1cceba.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

区块链网络上的每个节点都有一个如图1-4所示的相同的区块链副本，其中每个区块都是交易的集合，因此得名。 正如你所看到的，每个区块有两个主要部分。 "header"部分链接回前一个区块。 这意味着每个区块头都包含前一个块的哈希，因此任何人都不能更改前一个区块中的任何交易。 我们将在下面的章节中进一步研究这一概念的细节。 区块的另一部分是"正文内容"，其中包含已验证的交易列表、交易金额、相关各方的地址，以及一些更详细的信息。 因此，经由最新的区块，可以访问所有以前的区块。

让我们考虑一个实际的例子，看看交易是如何发生的，交易账本是如何通过网络更新的，看看这个系统是如何工作的:
假设有三个候选人---- 爱丽丝、鲍勃和查理---- 他们在区块链网络上互相做一些货币交易。 让我们通过一步一步的交易来了解区块链的开放和分布式的特点。

第一步:
让我们假设 Alice 随身携带了50美元，这是所有交易的起源，并且每个节点都知道它，如图1-5所示。

![A440588_1_En_1_Fig5_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-2fc64e6ff9a61da5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

第二步:
爱丽丝付了20美元给鲍勃做了一笔交易。 观察区块链是如何在每个节点更新的，如图1-6所示。

![A440588_1_En_1_Fig6_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-0d2b4b122b839b0d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

第三步:
Bob 通过向 Charlie 支付10美元来完成另一个交易，区块链得到更新，如图1-7所示。

![A440588_1_En_1_Fig7_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-3271e8daf7473413.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

请注意，区块中的交易数据是不可变的。 所有交易都是完全不可逆转的。 任何更改都将导致一个新交易，该交易将由所有提供服务的节点进行验证。 每个节点都有自己的区块链副本。
如果你脑子里突然冒出很多问题，比如"如果爱丽丝付给戴夫同样多的钱来让戴夫花同样多的钱，或者如果她的账户里没有足够的资金来支付怎么办?"？ ""安全是如何保证的？ ","等等，这是好问题！ 我们将在下面的章节中讨论这些细节。

### 1.2.1集中式系统 vs 去中心化系统
我们之所以关注集中化与去中心化 服务之间的争论，是因为区块链被设计成分布式的，与集中化的设计相悖。 然而，分布式和集中化系统之间的区别并不总是清晰的。 在许多地方，它们的定义非常不明确，而且具有误导性。 原因是几乎没有一个系统是完全集中或分布式的。 本节中的大多数概念和例子的灵感来自 Vitalik Buterin 先生的笔记，以太坊的创始人。

那么什么是分布式系统呢？ 为了不影响当前的讨论，让我们首先接受它，然后把它从讨论列表中删除。 请注意，无论一个系统是集中的还是去中心化的，它仍然可以是分布式的。 集中式的分布式系统是这样一种系统，某一个主节点负责分解任务或数据，并将负载分配给各个节点。 另一方面，一个去中心化的分布式系统是一个没有"主"节点的系统，但是计算可以分布。 区块链就是这样的一个例子，我们将在这本书的后面看到它的许多图解表示法。 图1-8是集中式的分布式系统外观的图示。

![A440588_1_En_1_Fig8_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-eccf84763c306a45.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这种表示类似于 Hadoop的工作原理。 虽然在这样的设计中，由于分布式计算的存在，计算速度更快，但是由于集中化，它也受到了限制。
让我们继续讨论集中化与去中心化。 极其重要的是要注意，对于一个系统来说，集中 / 分布不仅仅局限于技术架构。 我们想说的是，一个系统在技术上可以是集中的或分布的，但在逻辑上或政治上可能不是这样。 让我们看看这些不同的视角，以便能够根据需求正确地设计系统:

技术体系结构: 从技术体系结构的角度来看，系统可以是集中的，也可以是分布的。 我们考虑的是设计一个系统时有多少物理计算机(或节点)能够使用，在整个系统崩溃之前它能承受多少节点故障，等等。

政治视角: 这种视角表明个人、小团体或整个组织对一个系统的控制。 如果系统的计算机是由它们控制的，那么系统自然是集中的。 但是，如果没有特定的个人或团体控制这个系统，而且每个人在这个系统上都享有平等的权利，那么从政治意义上说，这就是一个去中心化系统！

逻辑视角:不管它是集中的，还是技术上或政治上的去中心化， 一个系统在逻辑上可以是集中的，也可以是去中心化的，这取决于它的倾向。 另一种类比是，如果你将一个系统(比如计算设备)垂直切成两半，每一半有服务提供者和消费者，如果他们能够作为独立的单位运作，那么他们既是去中心化的也是集中的。

在设计一个现实的生活中的系统并称之为集中或去中心化的系统时，上述所有观点都是至关重要的。 让我们来讨论一些综合了这些视角的例子，以澄清你可能存在的任何混淆:

如果你观察公司，他们是集中架构(一个总部) ，他们是政治集中(由首席执行官或董事会管理) ，他们逻辑上也集中。 (你不可能真的把它们劈成两半。)
我们交流的语言从各个角度来看都是去中心化的ーー无论是从体系结构上，政治上，还是逻辑上。 两人相互交流，他们的语言既不受政治影响，也不在逻辑上依赖其他人的语言。

像 BitTorrent 这样的种子系统从各个角度来看都是去中心化的。 任何节点都可以是提供者或消费者，因此即使将系统分成两部分，它仍然可以维持。
另一方面，内容分发网路在架构上是去中心化的，在逻辑上也是去中心化的，但在政治上是集中的，因为它是由公司拥有的。 亚马逊 CloudFront 就是一个例子。
现在让我们来分析区块链。 区块链的目标是去中心化。 因此，通过设计，它在体系结构上是去中心化的。 此外，从政治观点来看，它是去中心化的，因为没有人控制它。 然而，它在逻辑上是集中的，因为只有一个公共的协议，整个系统的行为像一个单一的全局计算机。

让我们分别探讨这些术语，用一个比较的视角，去理解为什么区块链是去中心化的设计。
 
 ### 1.2.1.1集中式系统
顾名思义，集中式系统对所有行政权力都有集中控制。 这类系统易于设计、维护、基于信任，但存在许多固有的局限性，如下:
- 它们只有一个中心点，所以不太稳定。
- 它们更容易受到攻击，因此也更不安全。
- 权力集中会导致不道德的操作。
- 大多数时候，可扩展性都很困难。

典型的集中式系统如图1-9所示。

![A440588_1_En_1_Fig9_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-b698ccf4cf16c7a3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
 
 ### 1.2.1.2去中心化系统
顾名思义，去中心化的系统没有集中的控制，每个节点都有相同的权限。 这样的系统很难设计、维护、管理。 然而，他们并没有受到传统集中式系统局限性的限制。 去中心化系统具有以下优点:
- 它们没有中心点，因此更加稳定和容错
- 抵抗攻击，因为没有中心点，所以更安全
- 所有人权限相同，因此不道德操作的范围较小，通常具有民主性质

一个典型的去中心化系统可能会出现如图1-10所示。

 ![A440588_1_En_1_Fig10_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-56622a0a6cd63e24.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

请注意，分布式系统也可以去中心化。 一个例子就是区块链！ 然而，不像一般的分布式系统，任务没有细分和委托给节点，因为区块链网络中没有中心节点，所以不会做任务细分这样的事情。 贡献节点不在网络中的一部分上工作，而是由感兴趣的节点(或随机选择的节点)执行整个网络。 一个典型的去中心化和分布式的系统，是一个有效的点对点系统，可能会如图1-11所示。

![A440588_1_En_1_Fig11_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-e7a518d13a92dff9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 1.3区块链的层次

在写这篇文章的时候，公共区块链，如以太坊正在开发的过程中，在这些区块链之上建立复杂的应用程序可能不是一个好主意。 记住，区块链绝不仅仅是一项技术，而是商业原理、经济学、博弈论、密码学和计算机科学工程的结合。 大多数真实世界的应用程序在本质上是相当复杂的，所以明智的做法是从头开始建立区块链解决方案。

本节的目的只是为您提供一个各种区块链层鸟瞰图，而需要深入钻研的核心原理放在之后章节。 首先，让我们回顾一下tcp / ip 协议栈的知识。 Tcp / ip 协议栈中的分层方法实际上是实现开放系统的一种标准。 拥有抽象层不仅有助于更好地理解堆栈，还有助于构建与堆栈兼容的产品，以实现开放系统。 此外，将各层彼此抽象出来，使系统更加健壮，更易于维护。 任何层的改变都不会影响其他层。 再次强调，不要把 tcp / ip 的类比与区块链层相混淆。 Tcp / ip 是每个互联网应用程序使用的通信协议，区块链也是如此。

在区块链里，目前还没有达成一致的全球标准，即明确区块链的组成部分分离成哪些不同的层次。 需要一个分层的、异构的体系结构，但目前这还是没实现的事情。 因此，我们将尝试构建区块链层，以便能够更好地理解这项技术，并在市场上数百个区块链 / 加密货币变体之间建立一个比较的分析框架。 请看图1-12中区块链的分层表示。

![A440588_1_En_1_Fig12_HTML.jpg](https://upload-images.jianshu.io/upload_images/16586138-39ab3439a583a23f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

您可能想知道为什么有五个图层，为什么没有更多的图层或者更少的图层。 显然，层次不能太多或太少; 这需要在复杂性、健壮性、适应性等等之间进行权衡。 其目的也不是为了标准化区块链技术，而是为了建立一个更好的理解框架。 请记住，这五个图层部署在所有节点上。
在这本书的第6章，我们将从头开始构建一个去中心化的应用程序，并学习区块链在所有这些图层上的功能，以及一个实际的案例。
、
### 1.3.1应用层

由于区块链的特性，例如数据的不可篡改性、参与者之间的透明性、抵御敌对性攻击的能力等，因此有许多应用程序正在被开发，以借用区块链的那些优势。 某些应用程序只是建立在应用层，理所当然，任何可用的区块链应用都会这样做。一些应用程序不仅建立在应用层，并与区块链中的其他层交织在一起。 这就是为什么应用层应该被视为区块链图层的一部分。

在应用层，您在其中编写所需的功能，并为最终用户开发一个应用程序。 它通常涉及用于软件开发的传统技术栈，如客户端编程、脚本、 api、开发框架等。 对于将区块链作为后端的应用程序，这些应用程序可能需要托管在某些 web 服务器上，这可能需要 web 应用程序开发、服务器端编程和 api 等。 理想情况下，好的区块链应用程序没有客户端-服务器模型，也没有客户端访问的中央服务器，比如比特币就是这样的工作方式。

您可能已经听说或者已经了解了关于侧链网络的知识。 这个想法是建立应用程序，不会使用区块链做所有事情，而是明智地使用它。 换句话说，这个概念是为了确保繁重的工作是在应用层完成的，或者庞大的存储需求用侧链实现，以便核心区块链是轻便和有效的，网络是不拥堵的。

### 1.3.2执行层

执行层是一个区块链网络中所有节点执行应用层命令的地方。 这些指令可以是简单的指令，也可以是智能合约形式的一组复杂指令。 在这两种情况下，都需要执行一个程序或脚本，以确保交易的正确执行。 区块链网络中的所有节点都必须独立执行程序 / 脚本。 在相同的输入和条件集上确定性地执行程序 / 脚本，总是在所有节点上产生相同的输出，这有助于避免歧义。

在比特币的例子中，这些简单的脚本不是图灵完备的，只允许执行一些指令集。 另一方面，Ethereum 和 Hyperledger 允许执行复杂的指令。 用solidity编写的 Ethereum 代码或其智能合约被编译成字节码或机器码，然后在它自己的 Ethereum 虚拟机上执行。 Hyperledger 对于其链码智能合约有一个简单得多的方法。 它支持在 docker 映像中运行已编译的机器码，并支持多个高级语言，如 Java 和 Go。

### 1.3.3语义层

语义层是一个逻辑层，因为交易和区块之间存在有序关系。 一个交易，无论是有效的还是无效的，都有一组指令，这些指令通过执行层执行，但要在语义层进行验证。 以比特币举例，一个人是否正在花费一笔合法交易，是否是双重花费，是否被授权进行这笔交易等等，都在这一层进行验证。 在接下来的章节中，你会了解到比特币实际上是作为代表系统状态的交易存在的。 为了能够花费一个比特币，你必须消费一个或多个以前的交易，并且比特币系统没有账户的概念。 这意味着，当某人进行交易时，他们使用之前的一笔交易的收款，在这个收款中，他们收款的金额至少能够支付现在正在消费的金额。 此交易必须通过遍历以前的交易，并由所有节点进行验证，以确定它是否是一个合法的交易。 另一方面，以太坊有账户的概念。 这意味着交易双方的帐户都会得到更新。

在这一层中，可以定义系统的规则，如数据模型和结构。 有些情况可能比简单的交易稍微复杂一些。 复杂的指令集经常被编码到智能合约当中。 当智能合约在接收到交易被调用时，系统状态将更新。 智能合约是一种特殊类型的帐户，它有可执行的代码和私有状态。 一个区块通常包含一堆交易和一些智能合约。 像 Merkle 树这样的数据结构在这个层中定义，在区块头中使用 Merkle 根，以维护区块头和区块体中的交易集之间的关系(通常是磁盘上存储的键值对)。 此外，数据模型、存储模式、基于内存 / 磁盘的处理等都可以在这个逻辑层中定义。

除了前面提到的，语义层定义了区块之间如何相互连接。 区块链中的每一个区块都包含前一个区块的哈希，一直到创世区块。 尽管区块链的最终状态是通过所有图层的贡献来实现的，但是每个区块之间的连接需要在这个层次中定义。 根据案例的不同，您可能需要在这个层中编写附加功能的代码。

### 1.3.4传播层

前面的图层更多的是一个单独的现象: 与系统中的其他节点没有太多的协调。 传播层是点对点的通信层，允许节点相互链接，并根据网络的当前状态相互通信和同步数据。 当一个交易执行时，我们知道它被广播到整个网络。 类似地，当一个节点想要发布一个有效的区块时，它会立即传播到整个网络，以便其他节点可以在其上挖矿，并将其视为最新的区块。 该层定义了网络中的交易 / 区块传播，保证了整个网络的稳定性。 通过设计，大多数区块链的设计是这样的，当他们知道一个新的交易 / 区块时，他们立即向邻近节点广播这个交易 / 区块。

在异步 Internet 网络中，往往存在交易或区块传播延迟的问题。 根据节点的容量、网络带宽和其他一些因素，有些广播会在几秒钟内发生，有些则需要更多的时间。

### 1.3.5共识层

共识层通常是大多数区块链系统的基础层。 这一层的主要目的是使所有节点在账本的唯一状态上达成一致。 根据案例的不同，节点之间可以有不同的达成共识的方法。 在这个层次上确定了区块链的安全性和可靠性。

 在比特币或以太币中，共识是通过称为"挖矿"的激励技术实现的。 对于一个公共区块链应是自我可持续的，所以必须有某种激励机制，才能有助于保持网络生存，实施共识。 比特币和 Ethereum 使用工作证明(Proof of Work，PoW)共识机制随机选择一个可以创建区块的节点。 一旦这个区块被创建并传播到所有的节点，邻近节点检查这个区块是否是一个有效的区块，区块中打包的交易是否合法， PoW 难题是否得到正确的解决; 邻近节点添加这个区块到自己的区块链的副本，在新区块的基础上挖矿。 共识的协议有许多不同的变体，例如利害关系证明(PoS)、去除利害关系证明(dPoS)、实用拜占庭将军问题协议(PBFT)等，我们将在之后的章节中详细介绍。

## 1.4为什么区块链很重要？

我们研究了集中式和去中心化系统的设计，并对去中心化系统相对于集中式系统的技术优势有了一些认识。 我们还学习了区块链的不同层次。 区块链作为一个去中心化的点对点系统，具有一些固有的好处和复杂度。 请记住，它不是一个silver bullet，可以解决世界上所有领域的问题，但有一些具体的情况下，区块链是必定需要的。 还有一些场景，区块链的解决方案使其更加健壮、透明和安全。 然而，如果做得不对，也会导致灾难！ 现在让我们用商业和功能的观点来分析区块链。

## 1.4.1集中式系统的局限性

如果您快速浏览一下软件演变历史，您将看到许多软件解决方案都有一个中心化的设计。 原因不仅仅是因为它们很容易开发和维护，还因为我们已经习惯了这样一种系统设计是值得信任的。 我们总是需要一个可信任的第三方来保护我们不被欺骗。 如果先前没有业务关系，就很难与某人进行交易。 一个人可能不会和陌生人做生意。

让我们举个例子来更好地理解它。 今天，当我们从亚马逊订购东西，我们觉得安全，并相信订购的东西会交付。 商品的生产者是某个人，而购买者是另一个人。 那么亚马逊在这里扮演着什么角色呢？ 它是作为一个可信任的中间人发挥推动者的作用，进而从交易中获得一些利益。 如果交易是由这种受信任的第三方保证的，则买方信任卖方。 区块链提出的是，在当今数字时代，我们并不真正需要第三方来建立信任，技术已经成熟到足以替代受信任第三方的功能。 在区块链中，信任是默认情况下网络中的固有部分，我们将在接下来的章节中探讨更多。

让我们快速了解一下传统集中式系统的一些缺点:
- 信任问题
- 安全问题
- 隐私问题ーー用户数据被贩卖，隐私遭到破坏
- 交易的金钱成本和时间因素

去中心化系统相对于中心化系统的一些优点是:
- 消除中间商
- 更容易和真实地核实交易
- 以较低的成本提高安全性
- 提高透明度
- 去中心化的和不可篡改的


## 1.5当今区块链应用
 
区块链和比特币一起出现在2009年，比特币是一种数字加密货币。 在它推出后不久，人们就意识到它真正的潜力不仅仅是加密货币。 一些公司提出了不同类型的区块链产品，如以太坊，Hyperledger 等。 微软和 IBM 分别在他们的 Azure 和 Bluemix 云平台上提供 SaaS (软件即服务)产品。 许多不同的创业公司成立，许多成熟的公司用区块链技术解决一些以前不容易解决的业务问题。

现在说区块链有巨大的潜力以某种方式颠覆几乎每个行业为时已晚; 革命已经开始。 区块链对金融服务市场产生了巨大的影响。 很难找出哪一个全球银行或金融机构不研究区块链的。 除了金融市场，媒体和娱乐、能源交易、预测市场、零售连锁店、忠诚奖励系统、保险、物流和供应链、医疗记录，以及政府和军事应用等领域，都已经或正在使用区块链技术。

在撰写本文时，目前的情况是这样的，许多创业公司和成熟公司都能看到一个以区块链技术为基础的系统如何真正解决一些领域的痛点，并在许多方面产生价值。 然而，设计正确的区块链解决方案是相当具有挑战性的。 对于一个基于区块链的产品或解决方案来说，确实有一些很棒的想法，但是要实现它们还有些困难。 有一些案例，只能搭建在公共区块链上。 设计一个不使用挖矿激励系统的自我可持续的区块链是困难的，当涉及到现有的公共区块链，如何建立无币区块链应用程序。 一个区块链应用程序是否只在应用层中构建，其他图层不改动，或者应用程序需要从头开始构建，这是一个很难决定的问题。 还有一些技术上的挑战。 区块链仍然在优化，它可能需要几年以上的时间才被主流采用。 到目前为止，有多种方案来解决区块链的可扩展性问题。 在整本书中，我们将努力帮你建立对所有这些观点的深刻理解。 现在，让我们在下面的小节中了解一些具体的用途和案例。
 
## 1.6 区块链的用途和案例

在这一部分，我们将介绍一些已经在金融、保险、银行、医疗、政府、供应链、物联网、媒体和娱乐等行业采取的案例。 然而，可能性是无限的！ 一个真正的共享经济，很难在中心化的系统里实现，而使用区块链技术是可能实现的(例如，点对点版本的优步，AirBNB)。 也有可能使公民拥有自己的ID(自主数字ID) ，并用区块链技术将自己的数据货币化。 现在，让我们来看看一些现有的案例。

- 任何类型的财产或资产，无论是实物的或数字的，如笔记本电脑，移动电话，钻石，汽车，房地产，电子登记，数字文件等，都可以登记在区块链上。 当这些资产从一个人转移到另一个人时，交易信息记录在区块链上，方便检查有效性或所有权。 此外，公证服务，存在的证明，定制的保险计划，以及更多这样的案例可以开发。

- 在区块链上开发了许多金融案例，如跨境支付、数字货币交易所、忠诚和奖励系统、银行间了解客户(KYC)等。 在这篇文章中，Initial Coin Offering (ICO)是一个最流行的案例。 Ico 是当今使用加密货币作为数字资产的最佳融资模式。 一个 ICO 中的数字货币可以被认为是一个企业中的数字股票，它非常容易购买和交易。

- 区块链可以用来实现"群众的智慧"，使用集体智慧领导和塑造企业，经济，以及其他各种各样的社会方面！ 基于群众智慧的金融和经济预测，去中心化市场预测、去中心化投票以及股票交易都可以在区块链上实现。

- 确定音乐版税的过程总是很复杂。 基于互联网的音乐流媒体服务获得了更高的市场渗透率，但是使得版税的确定过程更加复杂。 这个问题可以通过维护公共账本记录的音乐版权所有权信息，以及授权分发媒体的内容，这样的区块链技术来解决。

- 这是物联网时代，数十亿的物联网设备无处不在，设备数量还在增加。 一大堆不同的制造、模型和通信协议使得很难有一个集中的系统来控制设备和提供一个公共的数据交换平台。 这也是一个区块链技术的应用领域，可以建立一个去中心化的点对点系统，让物联网设备相互通信。 Adept (Autonomous Decentralized Peer-To-Peer emetry)是 IBM 和三星(Samsung)的一个联合倡议，他们开发了一个平台，利用比特币系统的基本底层设计元素来构建一个分布式设备网络——一个分布式的物联网。 Adept 使用三种协议: BitTorrent 用于文件共享，Ethereum 用于智能合约，TeleHash 用于平台中的点对点消息传递。 Iota 基金会是另一个这样的倡议。

- 在政府部门也是如此，区块链已经获得了动力。 在一些案例中，技术架构去中心化是必要的，但是政治上应该由政府管理: 土地登记、车辆登记和管理、电子投票等等都是一些正面的案例。 供应链是另一个区块链应用领域，有一些伟大的案例在这个领域发生。 供应链总是容易在全球范围内发生纠纷，因为旧的系统总是难以保持透明度。

## 摘要

在这一章，我们涵盖了区块链的演变，它的历史，它是什么，设计上的优势，以及用一些相关的案例说明为什么它是如此重要。 在这一部分，我们将以其改变游戏规则的产品来结束，这些产品符合技术革命的规律。

在20世纪90年代，互联网的广泛应用改变了人们做生意的方式。 它消除了创造和传播信息的障碍。 这为新市场、更多的商业机会，更多可能性铺平了道路。 类似地，今日的区块链，通过消除三个关键领域的障碍: 控制，信任和价值，将互联网带到一个全新的水平。

- 控制: 通过使系统去中心化，区块链使得分布式控制成为可能。
- 信任: 区块链是一个不可变的，防篡改的账本。 它为所有节点提供了一个唯一的、共享的真实信息源，创建了一个无需信任的系统。 这意味着，与任何陌生人或陌生机构进行交易时无需信任。
- 价值: 区块链可以实现任何形式的价值交换。 可以在没有中央机构或中间人的情况下发行和转让资产。

在第二章，我们将深入探讨区块链的基本原理。

## 参考资料

- The Meaning of Decentralization
Buterin, Vitalik, “The Meaning of Decentralization,” Medium, https://medium.com/@VitalikButerin/the-meaning-of-decentralization-a0c92b76a274 , February 6, 2017.

- BlockChain Technology
Crosby, Michael; Nachiappan; Pattanayak, Pradhan; Verma, Sanjeev; Kalyanaraman, Vignesh, “BlockChain Technology: Beyond Bitcoin,” Berkeley, CA: Sutardja Center for Entrepreneurship & Technology, University of California, http://scet.berkeley.edu/wp-content/uploads/BlockchainPaper.pdf , October 16, 2015.

- Torpey, Kyle, “Eric Lombrozo: Bitcoin Needs Protocol Layers Similar to the Internet,” CoinJournal, https://coinjournal.net/eric-lombrozo-bitcoin-needs-protocol-layers-similar-to-the-internet/ , January 28, 2016.

- Blockbench: A Framework for Analyzing Private blockchains
Dinh, Tien Tuan Anh; Wang, Ji; Chen, Gang; Liu, Rui; Ooi, Beng Chin; Tan, Kian-Lee, “Blockbench: A Framework for Analyzing Private blockchains,” https://arxiv.org/pdf/1703.04057.pdf , March 12, 2017.








Enter text in [Markdown](http://daringfireball.net/projects/markdown/). Use the toolbar above, or click the **?** button for formatting help.
